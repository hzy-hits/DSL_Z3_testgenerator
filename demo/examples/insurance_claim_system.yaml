# Insurance Claim Processing System
# This DSL defines the business rules for an insurance claim system

domain: Insurance Claim System

entities:
  - name: Policy
    description: Insurance policy information
    attributes:
      - name: policy_type
        type: integer
        min: 1
        max: 4
        enum_values: [1, 2, 3, 4]  # 1=Health, 2=Auto, 3=Home, 4=Life
        description: Type of insurance policy
      - name: coverage_amount
        type: real
        min: 10000.0
        max: 5000000.0
        description: Maximum coverage amount in USD
      - name: deductible
        type: real
        min: 0.0
        max: 10000.0
        description: Policy deductible amount
      - name: premium_paid
        type: boolean
        description: Whether current premium is paid

  - name: Claim
    description: Insurance claim details
    attributes:
      - name: claim_amount
        type: real
        min: 0.0
        max: 5000000.0
        description: Amount being claimed
      - name: incident_date_days_ago
        type: integer
        min: 0
        max: 365
        description: Days since incident occurred
      - name: claim_type
        type: integer
        min: 1
        max: 4
        enum_values: [1, 2, 3, 4]  # Must match policy type
        description: Type of claim matching policy types
      - name: documents_complete
        type: boolean
        description: Whether all required documents are submitted
      - name: previous_claims_count
        type: integer
        min: 0
        max: 10
        description: Number of previous claims in last year
      - name: fraud_risk_score
        type: integer
        min: 0
        max: 100
        description: Fraud risk assessment score (0-100)

constraints:
  - expression: claim_amount >= 0
    description: Claim amount must be non-negative
  - expression: claim_amount <= coverage_amount
    description: Claim cannot exceed coverage amount
  - expression: incident_date_days_ago >= 0 and incident_date_days_ago <= 365
    description: Incident must be within past year
  - expression: claim_type == policy_type
    description: Claim type must match policy type
  - expression: fraud_risk_score >= 0 and fraud_risk_score <= 100
    description: Fraud score must be between 0-100
  - expression: previous_claims_count >= 0 and previous_claims_count <= 10
    description: Previous claims tracked up to 10

rules:
  - name: Premium Payment Required
    condition: premium_paid == False
    action: claim_amount = 0
    description: No payout if premium not paid

  - name: Deductible Application
    condition: claim_amount > deductible
    action: claim_amount = claim_amount - deductible
    description: Apply deductible to claim amount

  - name: High Risk Fraud Review
    condition: fraud_risk_score > 70
    action: requires_manual_review = True
    description: High fraud risk requires manual review

  - name: Multiple Claims Reduction
    condition: previous_claims_count >= 3
    action: claim_amount = claim_amount * 0.8
    description: 20% reduction for frequent claimers

  - name: Late Reporting Penalty
    condition: incident_date_days_ago > 30
    action: claim_amount = claim_amount * 0.9
    description: 10% penalty for late claim reporting

  - name: Incomplete Documentation
    condition: documents_complete == False
    action: claim_status = "pending"
    description: Cannot process without complete documents

  - name: Small Claims Fast Track
    condition: claim_amount < 1000 and fraud_risk_score < 20
    action: fast_track_approval = True
    description: Auto-approve small, low-risk claims

  - name: Life Insurance Age Factor
    condition: policy_type == 4 and claim_amount > 1000000
    action: requires_beneficiary_verification = True
    description: High value life insurance needs verification

test_requirements:
  - name: Boundary Tests
    type: boundary
    focus: [claim_amount, fraud_risk_score, incident_date_days_ago]
    description: Test boundary values for key attributes

  - name: Equivalence Tests
    type: equivalence
    focus: [policy_type, claim_type]
    description: Test all policy and claim types

  - name: Negative Tests
    type: negative
    focus: [claim_amount, fraud_risk_score]
    description: Test invalid claim amounts and fraud scores

  - name: Combinatorial Tests
    type: combinatorial
    combinations: 2
    focus: [premium_paid, documents_complete, fraud_risk_score]
    description: Test combinations of claim processing factors