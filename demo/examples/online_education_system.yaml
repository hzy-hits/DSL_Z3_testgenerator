# 在线教育系统测试需求
# 该系统管理学生选课、教师授课、课程评分等功能

domain: Online Education System

entities:
  - name: Student
    attributes:
      - name: age
        type: integer
        min: 16
        max: 60
        description: 学生年龄
        
      - name: grade_level
        type: integer
        min: 1
        max: 12
        description: 年级水平
        
      - name: gpa
        type: real
        min: 0.0
        max: 4.0
        description: 平均成绩点
        
      - name: is_active
        type: boolean
        description: 是否为活跃学生
        
  - name: Course
    attributes:
      - name: credit_hours
        type: integer
        min: 1
        max: 6
        description: 学分数
        
      - name: difficulty_level
        type: integer
        min: 1
        max: 5
        enum_values: [1, 2, 3, 4, 5]
        description: 课程难度等级
        
      - name: max_students
        type: integer
        min: 10
        max: 300
        description: 最大学生数
        
      - name: min_grade_requirement
        type: integer
        min: 1
        max: 12
        description: 最低年级要求
        
      - name: course_fee
        type: real
        min: 0.0
        max: 5000.0
        description: 课程费用
        
  - name: Enrollment
    attributes:
      - name: student_age
        type: integer
        min: 16
        max: 60
        description: 注册学生年龄
        
      - name: student_grade
        type: integer
        min: 1
        max: 12
        description: 注册学生年级
        
      - name: course_difficulty
        type: integer
        min: 1
        max: 5
        description: 选修课程难度
        
      - name: course_credits
        type: integer
        min: 1
        max: 6
        description: 选修课程学分
        
      - name: course_grade_req
        type: integer
        min: 1
        max: 12
        description: 课程年级要求
        
      - name: score
        type: real
        min: 0.0
        max: 100.0
        description: 课程成绩
        
      - name: attendance_rate
        type: real
        min: 0.0
        max: 1.0
        description: 出勤率
        
constraints:
  # 学生相关约束
  - student_age >= 16
  - student_gpa >= 0.0 and student_gpa <= 4.0
  
  # 课程相关约束
  - course_credit_hours >= 1 and course_credit_hours <= 6
  - course_max_students >= 10
  - course_fee >= 0.0
  
  # 注册相关约束
  - enrollment_student_grade >= enrollment_course_grade_req
  - enrollment_score >= 0.0 and enrollment_score <= 100.0
  - enrollment_attendance_rate >= 0.0 and enrollment_attendance_rate <= 1.0
  
  # 业务逻辑约束
  - enrollment_student_age >= 16
  - enrollment_course_credits >= 1 and enrollment_course_credits <= 6

rules:
  - name: 高难度课程年龄限制
    condition: enrollment_course_difficulty >= 4
    implies: enrollment_student_age >= 18
    description: 难度4级及以上课程需要学生年满18岁
    
  - name: 优秀学生免费
    condition: student_gpa >= 3.8
    implies: course_fee == 0.0
    description: GPA 3.8以上的学生免课程费
    
  - name: 低年级课程限制
    condition: enrollment_student_grade <= 3
    implies: enrollment_course_difficulty <= 2
    description: 1-3年级学生只能选修难度1-2的课程
    
  - name: 高学分课程年级要求
    condition: enrollment_course_credits >= 5
    implies: enrollment_student_grade >= 10
    description: 5学分及以上课程需要10年级以上
    
  - name: 及格分数线
    condition: enrollment_attendance_rate >= 0.8
    implies: enrollment_score >= 60.0
    description: 出勤率80%以上才能及格
    
  - name: 优秀成绩标准
    condition: enrollment_score >= 90.0
    implies: enrollment_attendance_rate >= 0.9
    description: 90分以上需要90%出勤率
    
  - name: 高级课程小班制
    condition: course_difficulty_level >= 4
    implies: course_max_students <= 50
    description: 高难度课程限制50人以下
    
  - name: 基础课程大班
    condition: course_difficulty_level == 1
    implies: course_max_students >= 100
    description: 基础课程至少容纳100人

test_requirements:
  - name: 学生年龄边界测试
    type: boundary
    focus: [age]
    description: 测试学生年龄的边界值
    
  - name: 课程难度等价类测试
    type: equivalence
    focus: [difficulty_level]
    description: 测试所有难度等级
    
  - name: 注册规则覆盖测试
    type: rule_coverage
    description: 覆盖所有业务规则
    
  - name: 成绩和出勤组合测试
    type: combinatorial
    focus: [score, attendance_rate]
    combinations: 3
    description: 测试成绩和出勤率的组合
    
  - name: 负面测试
    type: negative
    description: 测试违反约束的情况